#!/usr/bin/env bash
# A simple bash port scanner written by Tim Galyean (@0x616163)
# This script was built out of necessity to map firewall
# restrictions on a remote host that filters outbound TCP connections
# More on /dev/tcp here http://tldp.org/LDP/abs/html/devref1.html

HOST="${1}"
SPORT=${2}
EPORT=${3}
CPORT=${SPORT}

if [ -z ${HOST} ] || [ -z ${SPORT} ] || [ -z ${EPORT} ]; then
	echo "${0}: <host> <start port> <end port>"
else
while [ ${CPORT} -le ${EPORT} ];
	do timeout 1 bash -c "echo >/dev/tcp/$HOST/${CPORT}" >>/dev/null 2>&1 && echo "tcp port ${CPORT} is open" || echo "tcp port ${CPORT} is closed"
	CPORT=$(($CPORT + 1))
done
fi

